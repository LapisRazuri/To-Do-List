// Import
////////////////////////////////////////////////////////////
import './style.css';
import { create, manageProjects } from './function.js';
import { dialogFunctions } from './dialog.js';
import { dom } from './dom.js';
////////////////////////////////////////////////////////////

const projectAssembly = (function () {

    function projectAssemblyKit (name) {

    // Create a new project
    ////////////////////////////////////////////////////////
    const createdProject = create.project(name);
    ////////////////////////////////////////////////////////////


    // Store the project in an array
    ////////////////////////////////////////////////////////////
    manageProjects.store(createdProject);
    ////////////////////////////////////////////////////////////


    // Create project div and project buttons
    ////////////////////////////////////////////////////////////
    dom.createProjectDiv(createdProject);
    dom.createProjectsBtns(createdProject);
    ////////////////////////////////////////////////////////////

    }

    return { projectAssemblyKit }

    })()




// Factory function
/////////////////////////////////////////////////////////////////////////////////////
const execute = (function () {


    // Variables
    ////////////////////////////////////////////////////////////
    const newProjectBtn = document.getElementById("newProjectBtn");
    const newToDoListBtn = document.getElementById("newToDoListBtn");
    const submitBtn = document.getElementById("submit");
    const closeDialogBtn = document.getElementById("closeDialog");
    ////////////////////////////////////////////////////////////


    // Button that creates a new project
    ////////////////////////////////////////////////////////////
    newProjectBtn.addEventListener('click', () => {

    // Name a project
    ////////////////////////////////////////////////////////
    const name = prompt("Name your project");
    ////////////////////////////////////////////////////////


    // Create project
    ////////////////////////////////////////////////////////
    projectAssembly.projectAssemblyKit(name);
    ////////////////////////////////////////////////////////

    })
    ////////////////////////////////////////////////////////////
    
    
    

    // Button that shows the dialog
    ////////////////////////////////////////////////////////////
    newToDoListBtn.addEventListener('click', () => {
        

        // Show the dialog
        ////////////////////////////////////////////////////////////
        dialogFunctions.showDialog();
        ////////////////////////////////////////////////////////////


      
        
    })
    ////////////////////////////////////////////////////////////


    // Button that creates a task
    ////////////////////////////////////////////////////////////
    submitBtn.addEventListener('click', function(event) {
        event.preventDefault();

         // Create a default project 
        ////////////////////////////////////////////////////////////
        const length = manageProjects.check();

        if (length == "empty") {
            const name = "default";

            projectAssembly.projectAssemblyKit(name);
        }        
        ////////////////////////////////////////////////////////////


        // Create a task//
        ///////////////////////////////////////////////////////////
        const title = document.getElementById('title').value;
        const description = document.getElementById('description').value;

        const createdTask = create.task(title, description);
        ////////////////////////////////////////////////////////////


        // Clarify selected project and project button
        ////////////////////////////////////////////////////////////
        const selected = manageProjects.select(createdTask);
        const project = selected[0];
        const button = selected[1];

        console.log(project)
        console.log(button)
        ////////////////////////////////////////////////////////////
        

        // Add task to project
        ////////////////////////////////////////////////////////////
        manageProjects.addTask(project, createdTask);
        ////////////////////////////////////////////////////////////
        

        // Reset the selected button
        ////////////////////////////////////////////////////////////
        dom.unselectButton(button);
        ////////////////////////////////////////////////////////////


        // Create a div for task
        ////////////////////////////////////////////////////////////
        dom.createTaskDiv(createdTask, project);
        ////////////////////////////////////////////////////////////

        
        //Close the dialog
        ////////////////////////////////////////////////////////////
        dialogFunctions.closeDialog();
        ////////////////////////////////////////////////////////////
    })
    ////////////////////////////////////////////////////////////


    // Button that closes the dialog
    ////////////////////////////////////////////////////////////
    closeDialogBtn.addEventListener('click', () => {
        dialogFunctions.closeDialog();
    })
    ////////////////////////////////////////////////////////////


    // Button that removes the project
    ////////////////////////////////////////////////////////////
    



    })()
/////////////////////////////////////////////////////////////////////////////////////






